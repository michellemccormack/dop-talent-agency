<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Payment Successful - Dopple Talent Agency</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0e0f12; --bg-2:#08090c;
      --panel:#12131a; --panel-2:#1a1b25;
      --text:#ececf1; --muted:#b7b8c3;
      --stroke:#26283a; --stroke-strong:#3a3b52;
      --accent:#8a8cff; --ok:#16db65; --shadow:0 10px 30px rgba(0,0,0,.35); --radius:16px;
    }
    
    *{box-sizing:border-box}
    html,body{height:100%}
    
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text); line-height:1.5;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(94,97,255,.12), transparent 40%),
        radial-gradient(900px 480px at 0% 110%, rgba(138,140,255,.10), transparent 45%),
        linear-gradient(180deg,var(--bg),var(--bg-2));
      min-height:100vh; padding:20px;
    }

    .container{max-width:600px; margin:0 auto; text-align:center}
    
    .success-card{
      background:linear-gradient(180deg,var(--panel),var(--panel-2));
      border:1px solid var(--stroke); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:40px 32px; margin:40px 0;
    }

    .success-icon{
      font-size:4rem; margin-bottom:24px; color:var(--ok);
    }

    .success-title{
      font-family:'Montserrat',sans-serif; font-weight:800; font-size:2rem;
      margin:0 0 16px; color:var(--text);
    }

    .success-message{
      color:var(--muted); font-size:1.1rem; margin-bottom:32px;
    }

    .dop-info{
      background:rgba(138,140,255,.1); border:1px solid var(--accent);
      border-radius:12px; padding:20px; margin:24px 0;
    }

    .dop-name{
      font-weight:700; font-size:1.2rem; margin-bottom:8px;
    }

    .dop-tier{
      color:var(--accent); font-weight:600; text-transform:uppercase;
      letter-spacing:.5px; font-size:.9rem;
    }

    .action-buttons{
      display:flex; gap:16px; justify-content:center; margin-top:32px;
    }

    .btn{
      padding:12px 24px; border:none; border-radius:12px;
      font-weight:600; text-decoration:none; transition:all .2s ease;
      cursor:pointer; font-size:16px;
    }

    .btn-primary{
      background:linear-gradient(135deg,var(--accent),#9b9dff);
      color:#000; box-shadow:0 4px 16px rgba(138,140,255,.3);
    }
    .btn-primary:hover{transform:translateY(-2px); box-shadow:0 6px 20px rgba(138,140,255,.4)}

    .btn-secondary{
      background:var(--panel-2); color:var(--text);
      border:1px solid var(--stroke);
    }
    .btn-secondary:hover{background:var(--panel); border-color:var(--stroke-strong)}

    @media (max-width:480px){
      .action-buttons{flex-direction:column}
      .success-card{padding:32px 24px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="success-card">
      <div class="success-icon">âœ…</div>
      <h1 class="success-title">Payment Successful!</h1>
      <p class="success-message">Your DOP has been upgraded and is ready for full conversations.</p>
      
      <div class="dop-info" id="dopInfo">
        <div class="dop-name" id="dopName">Loading...</div>
        <div class="dop-tier" id="dopTier">Upgraded</div>
      </div>

      <div class="action-buttons">
        <a href="#" id="chatBtn" class="btn btn-primary">Start Chatting</a>
        <a href="/" class="btn btn-secondary">Back to Home</a>
      </div>
    </div>
  </div>

  <script>
    // Get URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const dopId = urlParams.get('dopId');
    const tier = urlParams.get('tier') || 'basic';

    // Update UI
    document.getElementById('dopTier').textContent = `${tier.toUpperCase()} TIER`;
    
    if (dopId) {
      document.getElementById('chatBtn').href = `/chat.html?id=${dopId}`;
      
      // Try to load DOP name
      fetch(`/.netlify/functions/dop-persona?id=${dopId}`)
        .then(response => response.json())
        .then(persona => {
          if (persona.name) {
            document.getElementById('dopName').textContent = persona.name;
          }
        })
        .catch(error => {
          console.warn('Could not load DOP name:', error);
        });
    } else {
      document.getElementById('dopName').textContent = 'Your DOP';
    }
  </script>
</body>
</html>